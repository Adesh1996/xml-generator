<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Added for responsiveness -->
    <title>XML File Generator</title>
    <!-- Google Fonts - Inter for a modern look (added for consistency with previous versions, though not strictly in your provided HTML) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom CSS for Instagram-like aesthetics and responsiveness */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif; /* Changed to Inter for consistency */
            background: linear-gradient(120deg, #f0f2f5, #ebedee); /* Adjusted gradient for softer look */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Changed height to min-height */
            padding: 1rem; /* Add some padding for smaller screens */
            box-sizing: border-box;
        }

        .container {
            background: #fff;
            padding: 2.5rem; /* Increased padding */
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Softer shadow */
            width: 100%;
            max-width: 480px; /* Slightly wider */
            text-align: center;
            box-sizing: border-box;
        }

        .logo {
            margin-bottom: 25px;
        }

        .logo img {
            width: 150px;
        }

        .container h2 {
            margin-bottom: 2rem; /* Increased margin */
            font-weight: 700; /* Bold heading */
            color: #262626;
            font-size: 1.875rem; /* Equivalent to text-3xl */
        }

        .form-group {
            margin-bottom: 1.5rem; /* Consistent spacing */
            text-align: left;
        }

        label {
            display: block;
            text-align: left;
            margin-bottom: 0.5rem; /* Consistent spacing */
            font-size: 0.95rem; /* Slightly larger font */
            color: #525252; /* Medium grey for labels */
            font-weight: 600;
        }

        input[type="file"],
        input[type="number"] {
            width: 100%;
            padding: 0.75rem 1rem; /* Adjusted padding */
            margin-bottom: 0; /* Removed default margin-bottom from input */
            border: 1px solid #d4d4d4; /* Lighter border */
            border-radius: 0.75rem; /* Rounded input fields */
            font-size: 1rem;
            color: #333;
            box-sizing: border-box;
            -webkit-appearance: none; /* Remove default styling for file input on some browsers */
            -moz-appearance: none;
            appearance: none;
        }
        input[type="file"] {
            padding-top: 0.85rem; /* Adjust for file input appearance */
        }
        /* Style for the file input button */
        input[type="file"]::-webkit-file-upload-button {
            background: linear-gradient(to right, #4c66ee, #3b5998);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            margin-right: 1rem;
            font-weight: 600;
        }
        input[type="file"]::file-selector-button {
            background: linear-gradient(to right, #4c66ee, #3b5998);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            margin-right: 1rem;
            font-weight: 600;
        }

        button[type="submit"] { /* Targeted submit button */
            width: 100%;
            padding: 1rem 1.5rem;
            background: linear-gradient(to right, #4c66ee, #3b5998, #36a4e0); /* Instagram-like gradient */
            color: white;
            border: none;
            border-radius: 1.5rem; /* Pill-shaped button */
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Button shadow */
            margin-top: 1.5rem; /* Added margin-top for spacing */
        }
        button[type="submit"]:hover {
            transform: translateY(-3px); /* Lift effect on hover */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .footer {
            margin-top: 2rem; /* Increased margin */
            font-size: 0.8rem;
            color: #888;
        }

        /* Message box styles */
        .message {
            margin-bottom: 1.5rem; /* Adjusted margin */
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.95rem;
            font-weight: 600;
            text-align: center;
        }
        .message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Loading overlay styles */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6); /* Semi-transparent dark background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Ensure it's on top of other content */
            flex-direction: column;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            display: none; /* Hidden by default, shown by JavaScript */
        }
        /* Spinner animation */
        .spinner {
            border: 8px solid rgba(255, 255, 255, 0.3); /* Light grey border */
            border-top: 8px solid #4c66ee; /* Blue border for animation */
            border-radius: 50%; /* Makes it a circle */
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite; /* Spin animation */
            margin-bottom: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
       
        <h2>PAIN File Generator</h2>

        <!-- Message placeholder for dynamic injection -->
        [[${message_html}]]

        <form method="POST" action="/generate" enctype="multipart/form-data" onsubmit="showLoading()">
            <div class="form-group">
                <label for="templateFile">Upload Template XML File:</label>
                <!-- Updated name to templateFile and accept attribute to allow .xml,.txt files -->
                <input type="file" id="templateFile" name="templateFile" accept=".xml,.txt" required>
            </div>

            <div class="form-group">
                <label for="numTransactions">Total No. of Transactions:</label>
                <!-- Updated name to numTransactions and default value to 1 -->
                <input type="number" id="numTransactions" name="numTransactions" min="1" value="1" required>
            </div>

            <div class="form-group">
                <label for="numBatches">Total No. of Batches:</label>
                <!-- Updated name to numBatches and default value to 1 -->
                <input type="number" id="numBatches" name="numBatches" min="1" value="1" required>
            </div>

            <div class="form-group">
                <label for="numCopies">No. of Copies of Generated File:</label>
                <!-- New input for number of copies, name changed to numCopies -->
                <input type="number" id="numCopies" name="numCopies" min="1" value="1" required>
            </div>

            <!-- Changed input type="submit" to button for better styling control -->
            <button type="submit">Generate File</button>
        </form>
        <div class="footer">File Gateway</div>
    </div>

    <!-- Loading overlay, initially hidden -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <span>Generating files, please wait...</span>
    </div>

    <script>
        /**
         * Shows the loading overlay when the form is submitted.
         * This provides visual feedback to the user that processing is happening.
         */
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }
    </script>
</body>
</html>
